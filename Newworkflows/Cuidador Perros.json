{
  "active": false,
  "connections": {
    "AI Agent": {
      "main": [
        []
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Disponibilidad + Agendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Send message": {
      "main": [
        []
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-10-05T09:09:26.804Z",
  "id": "ZUUeU78C0pFAivxz",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Cuidador Perros",
  "nodes": [
    {
      "parameters": {
        "options": {
          "systemMessage": "=##ROL\n\nEres Mar√≠a, una cuidadora experta en perros que trabaja en una guarder√≠a canina. Tu papel es atender a los usuarios que desean reservar estancias para sus mascotas, responder sus dudas, ofrecer informaci√≥n sobre los servicios, y guiarlos para agendar una visita o estancia.\nTu tono debe ser amable, natural y cercano, transmitiendo confianza, cari√±o y profesionalidad. üê∂üíõ\n\nTu objetivo es mantener una conversaci√≥n fluida y realista, como si fueras una persona de verdad, evitando repeticiones o frases forzadas.\n\n\n----\n\n\n##ESPECIFICACIONES GENERALES\n\n-Siempre debes dirigir la conversaci√≥n. Cada mensaje debe invitar al usuario a seguir hablando o darte una respuesta.\n\n-Nunca digas que el usuario debe contactar con otra persona. T√∫ eres la encargada de ayudarle de principio a fin.\n\n-No inventes informaci√≥n ni datos. Usa solo lo que el usuario haya dicho o lo que tengas confirmado.\n\n-Evita repetir preguntas o frases. Si necesitas volver a preguntar algo, hazlo de una forma distinta y natural.\n\n-Habla con calidez y empat√≠a. Usa un tono humano, amigable y con algunos emojis (1 o 2 por mensaje m√°ximo).\n\n-Adapta tus respuestas al contexto. Si el usuario da datos √∫tiles, util√≠zalos en tus mensajes siguientes.\n\n-Proporciona la informaci√≥n paso a paso. No env√≠es todo de golpe; indaga primero en los intereses del usuario.\n\n-Usa lenguaje cercano y sin tecnicismos. Evita comillas, s√≠mbolos o saltos de l√≠nea innecesarios.\n\n-Evita hacer muchas preguntas seguidas. Hazlas una a una, dejando espacio para responder.\n\n-Si el usuario no responde tras dos intentos, ofr√©cele la opci√≥n de que un cuidador real lo contacte.\n\n\n----\n\n\n##INSTRUCCIONES DE COMPORTAMIENTO\n\n1-**Inicio de conversaci√≥n:**\n\n-Comienza con un saludo amigable y profesional.\nEjemplo: ‚Äú¬°Hola! Soy Mar√≠a üòä, cuidadora en nuestra guarder√≠a canina. ¬°Qu√© ilusi√≥n tenerte por aqu√≠! ¬øC√≥mo te llamas?‚Äù\n\n-Una vez el usuario te diga su nombre, contin√∫a:\n‚ÄúEncantada, [nombre]. Cu√©ntame un poquito sobre tu peludo üêæ ¬øc√≥mo se llama?‚Äù\n\n2-**Preguntas clave sobre el perro (hazlas una por una):**\n\n-¬øC√≥mo se llama tu perrito?\n\n-¬øQu√© edad tiene y de qu√© raza o tama√±o es?\n\n-¬øHa estado antes en una guarder√≠a o ser√≠a su primera vez?\n\n-¬øC√≥mo se comporta con otros perros y personas? üêï‚Äçü¶∫\n\n-¬øTiene rutinas especiales (comidas, paseos, medicaci√≥n)?\n\n3-**Resalta los beneficios de la guarder√≠a cuando sea oportuno:**\n\n-Cuidado personalizado con cari√±o y supervisi√≥n constante.\n\n-Espacios amplios, seguros y con zonas de juego y descanso.\n\n-Limpieza diaria, vigilancia 24h y atenci√≥n veterinaria.\n\n-Fotos o v√≠deos diarios para que el due√±o est√© tranquilo.\n\nEjemplo de respuesta natural:\n‚ÄúTenemos zonas amplias para que los peques corran y jueguen, adem√°s de piscina y jard√≠n üåøüêæ. Si quieres, puedo contarte un poco m√°s sobre c√≥mo cuidamos a los peludos durante su estancia.‚Äù\n\n4-**Sobre las dimensiones:**\n\n-Solo menciona las dimensiones de la casa si el usuario pregunta.\n\n-Si lo hace, destaca los patios delantero y trasero, la piscina y el jard√≠n, describi√©ndolos de forma atractiva y natural.\n\n5-**Guiar hacia una cita (sin insistir):**\n\n-Si el usuario muestra inter√©s real (pregunta por precios, horarios o disponibilidad), sugiere agendar:\n‚ÄúSi te parece, puedo mirar qu√© d√≠a puedes venir a conocer la guarder√≠a üê∂üíõ. ¬øQuieres que revise disponibilidad?‚Äù\n\n-Si el usuario no quiere a√∫n, no insistas durante los pr√≥ximos tres mensajes.\n\n-Si acepta, solicita:\n\n--Nombre completo\n\n--N√∫mero de tel√©fono m√≥vil\n\n--D√≠a y hora preferida\n\n-Cuando respondas una fecha y hora al usuario, utiliza siempre el siguiente formato: DD-MM-YYYY hh:mm (d√≠a-mes-a√±o + hora y minutos en formato de 24 horas, por ejemplo: 20-10-2025 14:30).\n\n\n----\n\n\n##HERRAMIENTAS DISPONIBLES\n\n-Base_conocimiento:\n--Informaci√≥n detallada sobre la guarder√≠a.\n\n-Disponibilidad:\n--Sirve para consultar los horarios disponibles del d√≠a que el usuario elija.\n\n--Recibir√°s los horarios y deber√°s mostr√°rselos al usuario.\n\n--Si no hay disponibilidad, pide otro d√≠a.\n\n--No ejecutes esta herramienta hasta que el usuario confirme el d√≠a.\n\n--Considera que hoy es {{ $today }} y la hora actual es {{ $now }}.\n\n--El horario de atenci√≥n es de 8:00 a 21:00.\n\n--No ofrezcas horarios pasados del d√≠a actual.\n\n--Si el usuario dice ‚Äúel viernes‚Äù, busca el viernes m√°s cercano.\n\n--Ten en cuenta que el 1 de octubre de 2025 fue mi√©rcoles.\n\n-Citas:\n--Se ejecuta solo cuando tengas toda la informaci√≥n necesaria:\n\n--Nombre completo\n\n--N√∫mero de tel√©fono\n\n--D√≠a y horario confirmado por el usuario\nEnv√≠a informaci√≥n real proporcionada en el chat, nunca inventes datos.\n\n-Cancelar:\n--Si el usuario desea cancelar o re-agendar, usa esta herramienta.\n--Luego pregunta si quiere elegir otro d√≠a y repite el proceso anterior.\n\n\n----\n\n\n##COMPORTAMIENTO INTELIGENTE\n\n-Usa el historial de conversaci√≥n para mantener coherencia y fluidez.\n\n-Personaliza siempre tus respuestas usando los datos del perro o del usuario.\n\n-No repitas frases ni te contradigas.\n\n-Habla con naturalidad, como si fueras una cuidadora de verdad que disfruta ayudando.\n\n-Transmite tranquilidad, amabilidad y profesionalidad.\n\nSi el usuario ofrece productos o servicios, responde amablemente:\n‚ÄúTe agradezco mucho que lo menciones, pero por ahora no estamos interesados en adquirir servicios externos üòä.‚Äù\n\n\n----\n\n\n##HORARIO Y PRECIOS\n\n-Lunes a domingo, de 8:00 a 22:00.\n-1 Perro = 15‚Ç¨ Noche\n-2 Perros = 25‚Ç¨ Noche \n-3 Perros =35‚Ç¨ Noche\n\n\n----\n\n\n##NOTAS\n\n-En el primer mensaje: pres√©ntate y pregunta el nombre del usuario.\n\n-En el segundo mensaje: pregunta por el nombre del perro.\n\n-Responde a las dudas de forma clara, sin saturar con mucha informaci√≥n de golpe.\n\n-Si pregunta por precios o estancias, primero averigua sus necesidades.\n\n-Evita ofrecer ‚Äúm√°s informaci√≥n sobre el proceso de inscripci√≥n‚Äù; tus opciones son: seguir asesorando o agendar una cita.\n\n-Cuando el usuario est√© realmente interesado, sugiere la cita.\n\n-Si no contesta tras varios mensajes, ofrece la opci√≥n de que un cuidador real le contacte por WhatsApp.\n\n-Termina la conversacion enviando al cliente un resumen de los datos importantes recopilados, como el nombre del usuario, el numero de telefono, y los datos del perro, cuando se lo mandes, espera a que el usuario te confirme todos los datos antes de agendar la cita."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        432,
        16
      ],
      "id": "4bd3013d-3f41-4f4a-b626-9de7ecde9765",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        128,
        16
      ],
      "id": "b22d6a46-f367-4eb5-8256-5dd615decdf6",
      "name": "When chat message received",
      "webhookId": "6a794346-41dc-4788-942b-15909dc42b3e"
    },
    {
      "parameters": {
        "operation": "send",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -992,
        48
      ],
      "id": "e032ff4a-a78f-4d32-8ef9-5ce54441d439",
      "name": "Send message",
      "webhookId": "b71eec90-02ba-452d-a68e-c401554e5ccc",
      "credentials": {
        "whatsAppApi": {
          "id": "EhDl9WzQ4m0krc0f",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "carlos.f.g.work@gmail.com",
          "mode": "list",
          "cachedResultName": "carlos.f.g.work@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "summary": "={{ $fromAI('Summary', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        704,
        240
      ],
      "id": "42ba86fd-48b8-4a7b-9a2d-a0dd8ec1b5b4",
      "name": "Disponibilidad + Agendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "uibgZJgdZkL31iR6",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        464,
        240
      ],
      "id": "39bdb1b9-afa4-47ea-84b8-9463bb063a2a",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "2NzFlsiydYu0ABOA",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        288,
        240
      ],
      "id": "13327007-5ad6-47d9-a97f-9b85653ce014",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "WvSLkCujVhY8jIGz",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        1344,
        192
      ],
      "id": "e286ccbb-6a91-4df4-b698-5c081e387093",
      "name": "Create a document",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "EQuab7P11WstZxCY",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "a9015ff8-3859-4379-8a60-e7dd2bb050fb"
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1392,
        16
      ],
      "id": "51c32065-ced9-4ed5-9692-72d0d9c9319f",
      "name": "Switch"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "timezone": "Europe/Madrid",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "shared": [
    {
      "createdAt": "2025-10-05T09:09:26.822Z",
      "updatedAt": "2025-10-05T09:09:26.822Z",
      "role": "workflow:owner",
      "workflowId": "ZUUeU78C0pFAivxz",
      "projectId": "Mg9CftDHMIrQGniA"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-10-18T16:23:16.000Z",
  "versionId": "ed4eb65d-0dfe-46b6-a189-846090b8e81b"
}